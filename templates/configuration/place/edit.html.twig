{% from "form/place.html.twig" import form as placeForm %}
{% from "form/meteo_france.html.twig" import form as meteoForm %}

{% extends 'base.html.twig' %}

{% block title %}{{ 'Paramétrer votre adresse' | trans }}{% endblock %}

{% block selection %}{% endblock %}

{% block body %}
<div class="container-fluid row justify-content-center align-items-center users">
  <div class='card config-form col-xl-6 col-lg-8 col-md-12'>
    <div class="card-body">
      {{ form_start(form) }}
      {{ form_errors(form) }}

      <h2><i class="fas fa-info-circle"></i> {{ 'Informations générales' | trans }}</h2>
      {{ placeForm(form.place) }}
      <hr>

      <h2><i class="fas fa-plug"></i> {{ 'Compteur Linky' | trans }}</h2>
      <div class="row">
        <div class="col-md-6 col-sm-12">
          <p>{{ aeneria_linky_description(linky) ?: ('<i>Aucun compteur Linky associé</i>' | trans | raw) }}</p>
        </div>
        <div class="col-md-4 col-sm-12">
          <a href="{{ path('config.place.enedis_consent', {id: place.id}) }}" class="btn btn-sm btn-outline-secondary">{{ linky ? ('Changer de compteur' | trans) : ('Associer un compteur Linky' | trans) }}</a>
          <p><small>{{ '(via mon espace Enedis)' | trans }}</small></p>
        </div>
      </div>
      <hr>

      <h2><i class="fas fa-burn"></i> {{ 'Compteur Gazpar' | trans }}</h2>
      <div class="row">
        <div class="col-md-6 col-sm-12">
          <p>{{ aeneria_gazpar_description(gazpar) ?: ('<i>Aucun compteur Gazpar associé</i>' | trans | raw) }}</p>
        </div>
        <div class="col-md-4 col-sm-12">
          <a href="{{ path('config.place.grdf_consent', {id: place.id}) }}" class="btn btn-sm btn-outline-secondary">{{ gazpar ? ('Changer de compteur' | trans) : ('Associer un compteur Gazpar' | trans) }}</a>
          <p><small>{{ '(Vous devez être <u><strong>déconnecté</strong></u> de votre espace GRDF)' | trans | raw }}</small></p>
        </div>
      </div>
      <hr>

      <h2><i class="fas fa-cloud-sun"></i> {{ 'Station météo de référence' | trans}}</h2>
      {{ meteoForm(form.meteo) }}

      {{ form_row(form.cancel) }}
      {{ form_row(form.save) }}

      {{ form_end(form) }}
    </div>
  </div>
</div>
{% endblock %}